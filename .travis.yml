language: python
python:
  - '3.8'
install:
  - pip install -e .[test]
script:
  - python tests/manage.py test tests
deploy:
  provider: pypi
  user: "__token__"
  password:
    secure: "NSyRGkm6otcj6Yb7JLd/RA2ZNxFS7zwpUoZZPiaA41ALffRy3hTzJY/kM2czfoJ/LQNjBCRJDeCpVnzYin0XkuQdGvzdY8+cr280UR5YSyFz1CG0mKui2joSJdYAudX9PChMASgwzTuWrpcfWMYSULeVBv/0UL+GCxet/7M1EugCr4NnubXCIClrl5rKZlAig/rnSk1MoTPTPEHvt0KHfRP2yp61rtv4n31QZb2Z/KSlwLSKC0nl2NyhIQVxbi4RAgBcEOglFpe2t2ClLEAmVEppEILlAY/M6P7g/GzykFhoZG1dd0GMWVIIXkIEu5X1lYQck+1YF/Byl3gQOcMgolLS9XVeN5WLUsclIzPc53aIi8fCoALWxL13c0G0525Ghnkt+O7QsVHbmO6EUqUBS8j3HlB8lwj2k1rBVqhPykP2v8EVFh1dMCoXu8JUQ0mNhP8ySMZfkbMOlb+Ss+NEXT+6K9gTzNPKF/fPdWvSAykhsbHwa3p5GlLuOUcDnYJOCaBDsaOHFgiAHrb8DMfOO3NTrlGUhgB1c/Yn7oUFpQ6nC4hC3RmDrKap2KJTnFOclg/CfqclXX8Ogu42/kHaEdHgrQ2qkaEsLUU33kcBxEVfG+rk5pVSP2+bbAPzt7yY9vmhk6OfDBE2MFTTh0rfghH+YyuxUk7cke2X8injQYo="
  on:
    branch: production